{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _classCallCheck from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";import _createClass from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";import _inherits from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\inherits.js\";import _createSuper from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createSuper.js\";import _regeneratorRuntime from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Component}from\"react\";import Newsitem from\"./Newsitem\";import Spinner from\"./Spinner\";import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var News=/*#__PURE__*/function(_Component){_inherits(News,_Component);var _super=_createSuper(News);function News(props){var _this;_classCallCheck(this,News);_this=_super.call(this,props);_this.fetchMoreData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&category=\").concat(_this.props.category,\"&apiKey=\").concat(_this.props.api,\"&page=\").concat(_this.state.page+1,\"&pagesize=\").concat(_this.props.pagesize);_context.next=3;return fetch(url);case 3:data=_context.sent;_context.next=6;return data.json();case 6:parsedData=_context.sent;_this.setState({page:_this.state.page+1,articles:_this.state.articles.concat(parsedData.articles),totalResults:parsedData.totalResults});case 8:case\"end\":return _context.stop();}}},_callee);}));_this.state={articles:[],loading:false,page:1,totalResults:0};document.title=\"610 News - \".concat(_this.Capitalize(_this.props.category));return _this;}_createClass(News,[{key:\"Capitalize\",value:function Capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1);}},{key:\"updateNews\",value:function(){var _updateNews=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.props.setprogress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&category=\").concat(this.props.category,\"&apiKey=\").concat(this.props.api,\"&page=\").concat(this.state.page,\"&pagesize=\").concat(this.props.pagesize);_context2.next=4;return fetch(url);case 4:data=_context2.sent;this.props.setprogress(30);_context2.next=8;return data.json();case 8:parsedData=_context2.sent;this.props.setprogress(70);this.setState({articles:this.state.articles.concat(parsedData.articles),totalResults:parsedData.totalResults});this.props.setprogress(100);case 12:case\"end\":return _context2.stop();}}},_callee2,this);}));function updateNews(){return _updateNews.apply(this,arguments);}return updateNews;}()},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.updateNews();case 1:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:// handlePrevClick = async () => {\n//   let url = `https://newsapi.org/v2/top-headlines?country=${\n//     this.props.country\n//   }&category=${this.props.category}&apiKey=${this.props.api}&page=${this.state.page - 1}&pagesize=${this.props.pagesize}`;\n//   this.setState({loading: true});\n//   let data = await fetch(url);\n//   let parsedData = await data.json();\n//   this.setState({\n//     page: this.state.page - 1,\n//     articles: parsedData.articles,\n//     loading: false\n//   });\n//   this.setState({\n//     page: this.state.page - 1\n//   });\n//   this.updateNews();\n// };\n//   handleNextClick = async () => {\n//     if (!(this.state.page + 1 > Math.ceil(this.state.totalResults / 9))) {\n//       let url = `https://newsapi.org/v2/top-headlines?country=${\n//         this.props.country\n//       }&category=${this.props.category}&apiKey=${this.props.api}&page=${\n//         this.state.page + 1\n//       }&pagesize=${this.props.pagesize}`;\n//       this.setState({loading: true});\n//       let data = await fetch(url);\n//       let parsedData = await data.json();\n//       this.setState({\n//         page: this.state.page + 1,\n//         articles: parsedData.articles,\n//         loading: false\n//       });\n//       this.setState({\n//         page: this.state.page + 1\n//       });\n//       this.updateNews();\n//   };\n// }\nfunction render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center mt-4 display-6 bg-secondary py-2 px-3 text-light\",children:[\"Top Headlines - \",this.Capitalize(this.props.category)]}),this.state.loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:this.state.articles.length,next:this.fetchMoreData,hasMore:this.state.articles.length!==this.totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 my-3\",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title?element.title.slice(0,30):\"\",description:element.description?element.description.slice(0,90):\"\",imageurl:!element.urlToImage?\"./download.jfif\":element.urlToImage,newsurl:element.url,date:element.publishedAt,source:element.source})},element.url);})})})})]});}}]);return News;}(Component);News.defaultProps={country:\"in\",pagesize:9,category:\"general\",api:\"efa74fb093b94b6091ce0a44e7bff29a\"};export default News;","map":{"version":3,"sources":["E:/rakesh/reactjs/newsapp/src/components/News.js"],"names":["React","Component","Newsitem","Spinner","InfiniteScroll","News","props","fetchMoreData","url","country","category","api","state","page","pagesize","fetch","data","json","parsedData","setState","articles","concat","totalResults","loading","document","title","Capitalize","str","charAt","toUpperCase","slice","setprogress","updateNews","length","map","element","description","urlToImage","publishedAt","source","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Newsitem from \"./Newsitem\";\r\nimport Spinner from \"./Spinner\";\r\nimport propTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\n\r\nexport class News extends Component {\r\n  static defaultProps = {\r\n    country: \"in\",\r\n    pagesize: 9,\r\n    category: \"general\",\r\n    api: \"efa74fb093b94b6091ce0a44e7bff29a\",\r\n  };\r\n\r\n  static propTypes = {\r\n    country: propTypes.string,\r\n    pagesize: propTypes.number,\r\n    category: propTypes.string,\r\n  };\r\n  Capitalize(str) {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      articles: [],\r\n      loading: false,\r\n      page: 1,\r\n      totalResults: 0\r\n    };\r\n    document.title = `610 News - ${this.Capitalize(this.props.category)}`;\r\n  }\r\n\r\n  async updateNews() {\r\n    this.props.setprogress(10);\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.api}&page=${this.state.page}&pagesize=${this.props.pagesize}`;\r\n    let data = await fetch(url);\r\n    this.props.setprogress(30);\r\n    let parsedData = await data.json();\r\n    this.props.setprogress(70);\r\n    this.setState({\r\n      articles: this.state.articles.concat(parsedData.articles),\r\n      totalResults: parsedData.totalResults\r\n    });\r\n    this.props.setprogress(100);\r\n  }\r\n  \r\n  async componentDidMount() {\r\n    this.updateNews();\r\n  }\r\n\r\n  fetchMoreData = async () => {\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&category=${this.props.category}&apiKey=${this.props.api}&page=${this.state.page+1}&pagesize=${this.props.pagesize}`;\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    this.setState({\r\n      page: this.state.page + 1,\r\n      articles: this.state.articles.concat(parsedData.articles),\r\n      totalResults: parsedData.totalResults\r\n    });\r\n  };\r\n\r\n  // handlePrevClick = async () => {\r\n  //   let url = `https://newsapi.org/v2/top-headlines?country=${\r\n  //     this.props.country\r\n  //   }&category=${this.props.category}&apiKey=${this.props.api}&page=${this.state.page - 1}&pagesize=${this.props.pagesize}`;\r\n  //   this.setState({loading: true});\r\n  //   let data = await fetch(url);\r\n  //   let parsedData = await data.json();\r\n  //   this.setState({\r\n  //     page: this.state.page - 1,\r\n  //     articles: parsedData.articles,\r\n  //     loading: false\r\n  //   });\r\n  //   this.setState({\r\n  //     page: this.state.page - 1\r\n  //   });\r\n  //   this.updateNews();\r\n  // };\r\n\r\n  //   handleNextClick = async () => {\r\n  //     if (!(this.state.page + 1 > Math.ceil(this.state.totalResults / 9))) {\r\n  //       let url = `https://newsapi.org/v2/top-headlines?country=${\r\n  //         this.props.country\r\n  //       }&category=${this.props.category}&apiKey=${this.props.api}&page=${\r\n  //         this.state.page + 1\r\n  //       }&pagesize=${this.props.pagesize}`;\r\n  //       this.setState({loading: true});\r\n  //       let data = await fetch(url);\r\n  //       let parsedData = await data.json();\r\n  //       this.setState({\r\n  //         page: this.state.page + 1,\r\n  //         articles: parsedData.articles,\r\n  //         loading: false\r\n  //       });\r\n  //       this.setState({\r\n  //         page: this.state.page + 1\r\n  //       });\r\n  //       this.updateNews();\r\n  //   };\r\n  // }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <h2 className=\"text-center mt-4 display-6 bg-secondary py-2 px-3 text-light\">\r\n          Top Headlines - {this.Capitalize(this.props.category)}\r\n        </h2>\r\n        \r\n        {this.state.loading && <Spinner/>}  \r\n\r\n        <InfiniteScroll\r\n          dataLength={this.state.articles.length}\r\n          next={this.fetchMoreData}\r\n          hasMore={this.state.articles.length !== this.totalResults}\r\n          loader={<Spinner />}\r\n        >\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              {this.state.articles.map((element) => {\r\n                return (\r\n                  <div className=\"col-md-4 my-3\" key={element.url}>\r\n                    <Newsitem\r\n                      title={element.title ? element.title.slice(0, 30) : \"\"}\r\n                      description={\r\n                        element.description\r\n                          ? element.description.slice(0, 90)\r\n                          : \"\"\r\n                      }\r\n                      imageurl={\r\n                        !element.urlToImage\r\n                          ? \"./download.jfif\"\r\n                          : element.urlToImage\r\n                      }\r\n                      newsurl={element.url}\r\n                      date={element.publishedAt}\r\n                      source={element.source}\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </InfiniteScroll>\r\n        {/*<div className=\"d-flex justify-content-center my-2 bg-light py-3\">\r\n          <button\r\n            disabled={this.state.page <= 1}\r\n            type=\"button\"\r\n            className=\"mx-2 btn btn-dark\"\r\n            onClick={this.handlePrevClick}\r\n          >\r\n            &#8592; Previous\r\n          </button>\r\n          <button\r\n            disabled={\r\n              this.state.page + 1 > Math.ceil(this.state.totalResults / 20)\r\n            }\r\n            type=\"button\"\r\n            className=\"mx-2 btn btn-dark\"\r\n            onClick={this.handleNextClick}\r\n          >\r\n            Next &#8594;\r\n          </button>\r\n        </div>*/}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default News;\r\n"]},"metadata":{},"sourceType":"module"}