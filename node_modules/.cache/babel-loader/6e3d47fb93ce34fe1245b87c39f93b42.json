{"ast":null,"code":"var _jsxFileName = \"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\src\\\\components\\\\News.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Newsitem from \"./Newsitem\";\nimport Spinner from \"./Spinner\";\nimport propTypes from \"prop-types\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst News = props => {\n  _s();\n\n  const [articles, setArticles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [totalResults, setTotalResults] = useState(0); // document.title = `610 News - ${Capitalize(props.category)}`;\n\n  const Capitalize = str => {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  };\n\n  const updateNews = async () => {\n    props.setprogress(10);\n    let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.api}&page=${this.state.page}&pagesize=${props.pagesize}`;\n    let data = await fetch(url);\n    props.setprogress(30);\n    let parsedData = await data.json();\n    props.setprogress(70);\n    setArticles(parsedData.articles);\n    setTotalResults(parsedData.totalResults);\n    setLoading(false);\n    props.setprogress(100);\n  };\n\n  useEffect(() => {\n    this.updateNews();\n  }, []);\n\n  const fetchMoreData = async () => {\n    let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.api}&page=${this.state.page + 1}&pagesize=${props.pagesize}`;\n    let data = await fetch(url);\n    let parsedData = await data.json();\n    this.setState({\n      page: this.state.page + 1,\n      articles: this.state.articles.concat(parsedData.articles),\n      totalResults: parsedData.totalResults\n    });\n  }; // handlePrevClick = async () => {\n  //   let url = `https://newsapi.org/v2/top-headlines?country=${\n  //     props.country\n  //   }&category=${props.category}&apiKey=${props.api}&page=${this.state.page - 1}&pagesize=${props.pagesize}`;\n  //   this.setState({loading: true});\n  //   let data = await fetch(url);\n  //   let parsedData = await data.json();\n  //   this.setState({\n  //     page: this.state.page - 1,\n  //     articles: parsedData.articles,\n  //     loading: false\n  //   });\n  //   this.setState({\n  //     page: this.state.page - 1\n  //   });\n  //   this.updateNews();\n  // };\n  //   handleNextClick = async () => {\n  //     if (!(this.state.page + 1 > Math.ceil(this.state.totalResults / 9))) {\n  //       let url = `https://newsapi.org/v2/top-headlines?country=${\n  //         props.country\n  //       }&category=${props.category}&apiKey=${props.api}&page=${\n  //         this.state.page + 1\n  //       }&pagesize=${props.pagesize}`;\n  //       this.setState({loading: true});\n  //       let data = await fetch(url);\n  //       let parsedData = await data.json();\n  //       this.setState({\n  //         page: this.state.page + 1,\n  //         articles: parsedData.articles,\n  //         loading: false\n  //       });\n  //       this.setState({\n  //         page: this.state.page + 1\n  //       });\n  //       this.updateNews();\n  //   };\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mt-4 display-6 bg-secondary py-2 px-3 text-light\",\n      children: [\"Top Headlines - \", this.Capitalize(props.category)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), this.state.loading && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 32\n    }, this), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n      dataLength: this.state.articles.length,\n      next: this.fetchMoreData,\n      hasMore: this.state.articles.length !== this.totalResults,\n      loader: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: this.state.articles.map(element => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4 my-3\",\n              children: /*#__PURE__*/_jsxDEV(Newsitem, {\n                title: element.title ? element.title.slice(0, 30) : \"\",\n                description: element.description ? element.description.slice(0, 90) : \"\",\n                imageurl: !element.urlToImage ? \"./download.jfif\" : element.urlToImage,\n                newsurl: element.url,\n                date: element.publishedAt,\n                source: element.source\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 21\n              }, this)\n            }, element.url, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(News, \"DJGT5z9fcO00SGn/4yt1PHL84Ps=\");\n\n_c = News;\nNews.defaultProps = {\n  country: \"in\",\n  pagesize: 9,\n  category: \"general\"\n};\nNews.propTypes = {\n  country: propTypes.string,\n  pagesize: propTypes.number,\n  category: propTypes.string\n};\nexport default News;\n\nvar _c;\n\n$RefreshReg$(_c, \"News\");","map":{"version":3,"sources":["E:/rakesh/reactjs/newsapp/src/components/News.js"],"names":["React","useEffect","useState","Newsitem","Spinner","propTypes","InfiniteScroll","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","Capitalize","str","charAt","toUpperCase","slice","updateNews","setprogress","url","country","category","api","state","pagesize","data","fetch","parsedData","json","fetchMoreData","setState","concat","length","map","element","title","description","urlToImage","publishedAt","source","defaultProps","string","number"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Newsitem from \"./Newsitem\";\r\nimport Spinner from \"./Spinner\";\r\nimport propTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\n\r\nconst News = (props) => {\r\n\r\n  const [articles, setArticles] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [page, setPage] = useState(1)\r\n  const [totalResults, setTotalResults] = useState(0)\r\n  // document.title = `610 News - ${Capitalize(props.category)}`;\r\n\r\n  \r\n  const Capitalize = (str) => {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n  }\r\n\r\n  const updateNews = async () => {\r\n    props.setprogress(10);\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.api}&page=${this.state.page}&pagesize=${props.pagesize}`;\r\n    let data = await fetch(url);\r\n    props.setprogress(30);\r\n    let parsedData = await data.json();\r\n    props.setprogress(70);  \r\n    setArticles(parsedData.articles);\r\n    setTotalResults(parsedData.totalResults);\r\n    setLoading(false)\r\n    props.setprogress(100);\r\n  }\r\n  \r\n  useEffect(() => {\r\n    this.updateNews();\r\n  }, [])\r\n  \r\n\r\n  const fetchMoreData = async () => {\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.api}&page=${this.state.page+1}&pagesize=${props.pagesize}`;\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    this.setState({\r\n      page: this.state.page + 1,\r\n      articles: this.state.articles.concat(parsedData.articles),\r\n      totalResults: parsedData.totalResults\r\n    });\r\n  };\r\n\r\n  // handlePrevClick = async () => {\r\n  //   let url = `https://newsapi.org/v2/top-headlines?country=${\r\n  //     props.country\r\n  //   }&category=${props.category}&apiKey=${props.api}&page=${this.state.page - 1}&pagesize=${props.pagesize}`;\r\n  //   this.setState({loading: true});\r\n  //   let data = await fetch(url);\r\n  //   let parsedData = await data.json();\r\n  //   this.setState({\r\n  //     page: this.state.page - 1,\r\n  //     articles: parsedData.articles,\r\n  //     loading: false\r\n  //   });\r\n  //   this.setState({\r\n  //     page: this.state.page - 1\r\n  //   });\r\n  //   this.updateNews();\r\n  // };\r\n\r\n  //   handleNextClick = async () => {\r\n  //     if (!(this.state.page + 1 > Math.ceil(this.state.totalResults / 9))) {\r\n  //       let url = `https://newsapi.org/v2/top-headlines?country=${\r\n  //         props.country\r\n  //       }&category=${props.category}&apiKey=${props.api}&page=${\r\n  //         this.state.page + 1\r\n  //       }&pagesize=${props.pagesize}`;\r\n  //       this.setState({loading: true});\r\n  //       let data = await fetch(url);\r\n  //       let parsedData = await data.json();\r\n  //       this.setState({\r\n  //         page: this.state.page + 1,\r\n  //         articles: parsedData.articles,\r\n  //         loading: false\r\n  //       });\r\n  //       this.setState({\r\n  //         page: this.state.page + 1\r\n  //       });\r\n  //       this.updateNews();\r\n  //   };\r\n  // }\r\n\r\n    return (\r\n      <>\r\n        <h2 className=\"text-center mt-4 display-6 bg-secondary py-2 px-3 text-light\">\r\n          Top Headlines - {this.Capitalize(props.category)}\r\n        </h2>\r\n        \r\n        {this.state.loading && <Spinner/>}  \r\n\r\n        <InfiniteScroll\r\n          dataLength={this.state.articles.length}\r\n          next={this.fetchMoreData}\r\n          hasMore={this.state.articles.length !== this.totalResults}\r\n          loader={<Spinner />}\r\n        >\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              {this.state.articles.map((element) => {\r\n                return (\r\n                  <div className=\"col-md-4 my-3\" key={element.url}>\r\n                    <Newsitem\r\n                      title={element.title ? element.title.slice(0, 30) : \"\"}\r\n                      description={\r\n                        element.description\r\n                          ? element.description.slice(0, 90)\r\n                          : \"\"\r\n                      }\r\n                      imageurl={\r\n                        !element.urlToImage\r\n                          ? \"./download.jfif\"\r\n                          : element.urlToImage\r\n                      }\r\n                      newsurl={element.url}\r\n                      date={element.publishedAt}\r\n                      source={element.source}\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </InfiniteScroll>\r\n        {/*<div className=\"d-flex justify-content-center my-2 bg-light py-3\">\r\n          <button\r\n            disabled={this.state.page <= 1}\r\n            type=\"button\"\r\n            className=\"mx-2 btn btn-dark\"\r\n            onClick={this.handlePrevClick}\r\n          >\r\n            &#8592; Previous\r\n          </button>\r\n          <button\r\n            disabled={\r\n              this.state.page + 1 > Math.ceil(this.state.totalResults / 20)\r\n            }\r\n            type=\"button\"\r\n            className=\"mx-2 btn btn-dark\"\r\n            onClick={this.handleNextClick}\r\n          >\r\n            Next &#8594;\r\n          </button>\r\n        </div>*/}\r\n      </>\r\n    );\r\n}\r\n\r\nNews.defaultProps = {\r\n  country: \"in\",\r\n  pagesize: 9,\r\n  category: \"general\"\r\n};\r\n\r\nNews.propTypes = {\r\n  country: propTypes.string,\r\n  pagesize: propTypes.number,\r\n  category: propTypes.string,\r\n};\r\n\r\nexport default News;\r\n"]},"metadata":{},"sourceType":"module"}