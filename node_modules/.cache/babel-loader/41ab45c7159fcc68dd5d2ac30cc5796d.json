{"ast":null,"code":"import _asyncToGenerator from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\rakesh\\\\reactjs\\\\newsapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from\"react\";import Newsitem from\"./Newsitem\";import Spinner from\"./Spinner\";import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],setTotalResults=_useState8[1];var Capitalize=function Capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1);};var updateNews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setprogress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.api,\"&page=\").concat(page,\"&pagesize=\").concat(props.pagesize);_context.next=4;return fetch(url);case 4:data=_context.sent;props.setprogress(30);_context.next=8;return data.json();case 8:parsedData=_context.sent;props.setprogress(70);setArticles(parsedData.articles);setTotalResults(parsedData.totalResults);setLoading(false);props.setprogress(100);case 14:case\"end\":return _context.stop();}}},_callee);}));return function updateNews(){return _ref.apply(this,arguments);};}();useEffect(function(){document.title=\"610 News - \".concat(Capitalize(props.category));updateNews();/* eslint-disable no-eval */},[]);var fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.api,\"&page=\").concat(page+1,\"&pagesize=\").concat(props.pagesize);_context2.next=3;return fetch(url);case 3:data=_context2.sent;_context2.next=6;return data.json();case 6:parsedData=_context2.sent;setPage(page+1);setArticles(articles.concat(parsedData.articles));setTotalResults(parsedData.totalResults);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();// handlePrevClick = async () => {\n//   let url = `https://newsapi.org/v2/top-headlines?country=${\n//     props.country\n//   }&category=${props.category}&apiKey=${props.api}&page=${this.state.page - 1}&pagesize=${props.pagesize}`;\n//   this.setState({loading: true});\n//   let data = await fetch(url);\n//   let parsedData = await data.json();\n//   this.setState({\n//     page: this.state.page - 1,\n//     articles: parsedData.articles,\n//     loading: false\n//   });\n//   this.setState({\n//     page: this.state.page - 1\n//   });\n//   this.updateNews();\n// };\n//   handleNextClick = async () => {\n//     if (!(this.state.page + 1 > Math.ceil(this.state.totalResults / 9))) {\n//       let url = `https://newsapi.org/v2/top-headlines?country=${\n//         props.country\n//       }&category=${props.category}&apiKey=${props.api}&page=${\n//         this.state.page + 1\n//       }&pagesize=${props.pagesize}`;\n//       this.setState({loading: true});\n//       let data = await fetch(url);\n//       let parsedData = await data.json();\n//       this.setState({\n//         page: this.state.page + 1,\n//         articles: parsedData.articles,\n//         loading: false\n//       });\n//       this.setState({\n//         page: this.state.page + 1\n//       });\n//       this.updateNews();\n//   };\n// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center mt-4 display-6 bg-secondary py-2 px-3 text-light\",children:[\"Top Headlines - \",Capitalize(props.category)]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 my-3\",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title?element.title.slice(0,30):\"\",description:element.description?element.description.slice(0,90):\"\",imageurl:!element.urlToImage?\"./download.jfif\":element.urlToImage,newsurl:element.url,date:element.publishedAt,source:element.source})},element.url);})})})})]});};News.defaultProps={country:\"in\",pagesize:9,category:\"general\"};export default News;","map":{"version":3,"sources":["E:/rakesh/reactjs/newsapp/src/components/News.js"],"names":["React","useEffect","useState","Newsitem","Spinner","InfiniteScroll","News","props","articles","setArticles","loading","setLoading","page","setPage","totalResults","setTotalResults","Capitalize","str","charAt","toUpperCase","slice","updateNews","setprogress","url","country","category","api","pagesize","fetch","data","json","parsedData","document","title","fetchMoreData","concat","length","map","element","description","urlToImage","publishedAt","source","defaultProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Newsitem from \"./Newsitem\";\r\nimport Spinner from \"./Spinner\";\r\nimport propTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nconst News = (props) => {\r\n  \r\n  const [articles, setArticles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [totalResults, setTotalResults] = useState(0);\r\n\r\n  const Capitalize = (str) => {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n  };\r\n\r\n  const updateNews = async () => {\r\n    props.setprogress(10);\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.api}&page=${page}&pagesize=${props.pagesize}`;\r\n    let data = await fetch(url);\r\n    props.setprogress(30);\r\n    let parsedData = await data.json();\r\n    props.setprogress(70);\r\n    setArticles(parsedData.articles);\r\n    setTotalResults(parsedData.totalResults);\r\n    setLoading(false);\r\n    props.setprogress(100);\r\n  };\r\n  \r\n  useEffect(() => {\r\n    document.title = `610 News - ${Capitalize(props.category)}`;\r\n    updateNews();\r\n    /* eslint-disable no-eval */\r\n  }, []);\r\n\r\n  const fetchMoreData = async () => {\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${\r\n      props.country\r\n    }&category=${props.category}&apiKey=${props.api}&page=${\r\n      page + 1\r\n    }&pagesize=${props.pagesize}`;\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    setPage(page + 1);\r\n    setArticles(articles.concat(parsedData.articles));\r\n    setTotalResults(parsedData.totalResults);\r\n  };\r\n\r\n  // handlePrevClick = async () => {\r\n  //   let url = `https://newsapi.org/v2/top-headlines?country=${\r\n  //     props.country\r\n  //   }&category=${props.category}&apiKey=${props.api}&page=${this.state.page - 1}&pagesize=${props.pagesize}`;\r\n  //   this.setState({loading: true});\r\n  //   let data = await fetch(url);\r\n  //   let parsedData = await data.json();\r\n  //   this.setState({\r\n  //     page: this.state.page - 1,\r\n  //     articles: parsedData.articles,\r\n  //     loading: false\r\n  //   });\r\n  //   this.setState({\r\n  //     page: this.state.page - 1\r\n  //   });\r\n  //   this.updateNews();\r\n  // };\r\n\r\n  //   handleNextClick = async () => {\r\n  //     if (!(this.state.page + 1 > Math.ceil(this.state.totalResults / 9))) {\r\n  //       let url = `https://newsapi.org/v2/top-headlines?country=${\r\n  //         props.country\r\n  //       }&category=${props.category}&apiKey=${props.api}&page=${\r\n  //         this.state.page + 1\r\n  //       }&pagesize=${props.pagesize}`;\r\n  //       this.setState({loading: true});\r\n  //       let data = await fetch(url);\r\n  //       let parsedData = await data.json();\r\n  //       this.setState({\r\n  //         page: this.state.page + 1,\r\n  //         articles: parsedData.articles,\r\n  //         loading: false\r\n  //       });\r\n  //       this.setState({\r\n  //         page: this.state.page + 1\r\n  //       });\r\n  //       this.updateNews();\r\n  //   };\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"text-center mt-4 display-6 bg-secondary py-2 px-3 text-light\">\r\n        Top Headlines - {Capitalize(props.category)}\r\n      </h2>\r\n\r\n      {loading && <Spinner />}\r\n\r\n      <InfiniteScroll\r\n        dataLength={articles.length}\r\n        next={fetchMoreData}\r\n        hasMore={articles.length !== totalResults}\r\n        loader={<Spinner />}\r\n      >\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {articles.map((element) => {\r\n              return (\r\n                <div className=\"col-md-4 my-3\" key={element.url}>\r\n                  <Newsitem\r\n                    title={element.title ? element.title.slice(0, 30) : \"\"}\r\n                    description={element.description ? element.description.slice(0, 90): \"\"}\r\n                    imageurl={!element.urlToImage ? \"./download.jfif\": element.urlToImage}\r\n                    newsurl={element.url}\r\n                    date={element.publishedAt}\r\n                    source={element.source}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </InfiniteScroll>\r\n      {/*<div className=\"d-flex justify-content-center my-2 bg-light py-3\">\r\n          <button\r\n            disabled={this.state.page <= 1}\r\n            type=\"button\"\r\n            className=\"mx-2 btn btn-dark\"\r\n            onClick={this.handlePrevClick}\r\n          >\r\n            &#8592; Previous\r\n          </button>\r\n          <button\r\n            disabled={\r\n              this.state.page + 1 > Math.ceil(this.state.totalResults / 20)\r\n            }\r\n            type=\"button\"\r\n            className=\"mx-2 btn btn-dark\"\r\n            onClick={this.handleNextClick}\r\n          >\r\n            Next &#8594;\r\n          </button>\r\n        </div>*/}\r\n    </>\r\n  );\r\n};\r\n\r\nNews.defaultProps = {\r\n  country: \"in\",\r\n  pagesize: 9,\r\n  category: \"general\",\r\n};\r\n\r\nNews.propTypes = {\r\n  country: propTypes.string,\r\n  pagesize: propTypes.number,\r\n  category: propTypes.string,\r\n};\r\n\r\nexport default News;"]},"metadata":{},"sourceType":"module"}